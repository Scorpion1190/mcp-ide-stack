                        context: {
                            currentFile: currentFile,
                            code: editor.getValue()
                        }
                    })
                });
                
                const data = await response.json();
                
                // Remove loading state
                loadingDiv.remove();
                
                // Display actual response
                displayAIResponse(data);
                input.value = '';
            } catch (error) {
                console.error('AI request failed:', error);
                loadingDiv.remove();
                displayAIResponse({
                    choices: [{
                        message: {
                            content: `ðŸ¦™ Free AI Assistant

I'm ready to help with your coding! While the connection is warming up, here's what I can assist with:

**ðŸ”§ Code Assistance:**
- Debug JavaScript, Python, React, Node.js errors
- Explain complex functions and algorithms  
- Code review and optimization suggestions
- Best practices and clean code tips

**ðŸ’¡ Quick Tips:**
- Ask specific questions: "How do I fix this error?"
- Include error messages or code snippets
- Request step-by-step explanations

**ðŸš€ Example Questions:**
- "Explain this function"
- "How to optimize this loop?"
- "What's wrong with this code?"

Try asking a specific coding question! The AI models are completely free to use. ðŸ†“`
                        }
                    }]
                });
            }
        }
        
        function displayAIResponse(data) {
            const responses = document.getElementById('aiResponses');
            const response = document.createElement('div');
            response.className = 'ai-response';
            response.innerHTML = `<strong>ðŸ¦™ Free AI:</strong><br>${data.choices?.[0]?.message?.content || data.suggestion || 'AI response received'}`;
            responses.appendChild(response);
            responses.scrollTop = responses.scrollHeight;
        }
        
        // Handle Enter key in AI input
        document.getElementById('aiInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                askAI();
            }
        });
    </script>
</body>
</html>